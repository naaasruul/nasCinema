<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html">NasCinema</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link " aria-current="page" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="myfav.html">Favourites</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="watchlist.html">Watchlist</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    <main class="container mt-4">
      <h1 >My Favourites</h1>
      <div id="message"></div>
      <hr>
        <div id="moviesList"></div>
        <div class="d-none" id="watchList"></div>
    </main>

  </body>
  <!-- <script>
    function readAllItemsFromLocalStorage() {
  const moviesList = document.getElementById('moviesList');
  moviesList.innerHTML = ''; // Clear existing list

  // Check if the 'favMovies' item exists in localStorage
  const storedMovies = localStorage.getItem('favMovies');
  if (!storedMovies) {
    moviesList.innerHTML = '<p>No favourite movies added yet.</p>';
    console.log('No favourite movies added yet.'); // Log to console as well
    return;
  }

  try {
    const movies = JSON.parse(storedMovies);
    // Now movies is an object where each property is a movieID and its value is the movie details
    Object.keys(movies).forEach(movieID => {
      const movie = movies[movieID];
      console.log(`Movie ID: ${movieID}`, movie); // Log the movie details to the console for debugging

      const movieElement = document.createElement('div');
      // Add a class to the movieElement div
      movieElement.classList.add('movie-item');

      movieElement.innerHTML = `
      <hr>
      <img src="${movie.Poster}" alt="${movie.Title}" style="width:300px;">
      <span class="d-flex flex-column p-4 justify-content-center mt-2 align-items-start">
      <h1>${movie.Title} (${movie.Year})</h1>
      <p class="">${movie.Plot}</p>
      <button class="btn mt-3 w-25 btn-danger" id="remove-${movieID}">Remove</button>
      </span>        
      <hr>
      <div class="d-flex justify-content-center">
      </div>
      `;

      moviesList.appendChild(movieElement);

      // Add click event listener for the remove button
      document.getElementById(`remove-${movieID}`).addEventListener('click', function() {
        removeMovieFromFavorites(movieID);
      });
    });
  } catch (e) {
    console.error('Error parsing movie data from localStorage:', e);
  }
}
readAllItemsFromLocalStorage()

function removeMovieFromFavorites(movieID) {
  // Retrieve the current list of movies from localStorage
  const storedMovies = localStorage.getItem('favMovies');
  if (storedMovies) {
    const movies = JSON.parse(storedMovies);

    // Remove the specified movie from the object
    delete movies[movieID];
    
    // Update the localStorage with the new set of movies
    localStorage.setItem('favMovies', JSON.stringify(movies));

    // Refresh the movies list
    readAllItemsFromLocalStorage();
  }
}

  </script> -->
  <script src="script.js"></script>
  <script src="index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</html>